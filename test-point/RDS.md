# RDS (Relational Database Service)
マネージネド型のRDBMSサービス

## Point
- [ ] DB Status
  - [ ] available: インスタンスは正常で、使用可能です 
  - [ ] backing-up: インスタンスは正常で、使用可能です 
  - [ ] configuring-enhanced-monitoring: 拡張モニタリングはこのインスタンスに対して有効、または無効にされています。
  - [ ] creating: インスタンスは現在作成中です。作成中はインスタンスにアクセスできません
  - [ ] deleting: インスタンスの削除中です
  - [ ] failed: インスタンスでエラーが発生し、Amazon RDS は復旧できませんでした。インスタンスの復元可能な直近の時間までポイントインタイムリカバリを実行し、データを復旧してください
  - [ ] inaccessible-encryption-credentials: DB インスタンスの暗号化または復号に使用する KMS キーにアクセスできませんでした
  - [ ] incompatible-credentials: 指定された CloudHSM Classic のユーザー名またはパスワードに誤りがあります。DB インスタンスの CloudHSM Classic 認証情報を更新してください
  - [ ] incompatible-network: Amazon RDS は、インスタンスで復旧アクションの実行を試みていますが、VPC がアクションを完了できない状態にあるため実行できません。このステータスは、たとえば、サブネット内の使用可能なすべての IP アドレスが使用中で、Amazon RDS が DB インスタンスの IP アドレスを取得できない場合などに発生する可能性があります
  - [ ] incompatible-option-group: Amazon RDS がオプショングループの変更を適用しようとしましたが、適用できませんでした。また、Amazon RDS はオプショングループの前の状態にロールバックできませんでした。詳細については、DB インスタンスの最近のイベント一覧を参照してください。このステータスは、たとえば、オプショングループに TDE などのオプションが含まれており、DB インスタンスに暗号化情報が含まれていない場合などに発生する可能性があります。
  - [ ] incompatible-parameters: インスタンスの DB パラメータグループで指定されたパラメータに互換性がなかったため、Amazon RDS は DB インスタンスを起動できませんでした。パラメータの変更を元に戻すか、インスタンスの互換性を確保して、インスタンスへのアクセスを再取得してください。互換性のないパラメータの詳細については、DB インスタンスの最近のイベント一覧を参照してください
  - [ ] incompatible-restore: Amazon RDS は、ポイントインタイムリカバリを実行できませんでした。この状況の一般的な原因としては、temp テーブルの使用、MySQL での MyISAM テーブルまたは MariaDB での Aria テーブルの使用が考えられます
  - [ ] maintenance: Amazon RDS は、DB インスタンスにメンテナンス更新を適用しています。このステータスは、RDS が事前に十分スケジュールしたインスタンスレベルのメンテナンスに使用されます。このステータスを通じてお客様に追加のメンテナンスアクションを提示する方法を評価中です。
  - [ ] modifying: お客様がインスタンスの変更をリクエストしたため、インスタンスは変更中です
  - [ ] rebooting: お客様がインスタンスの再起動をリクエストしたか、インスタンスの再起動が必要な Amazon RDS プロセスが発生したため、インスタンスを再起動中です
  - [ ] renaming: お客様が名前の変更をリクエストしたため、インスタンスの名前を変更中です
  - [ ] resetting-master-credentials: お客様がリセットをリクエストしたため、インスタンスのマスター認証情報をリセット中です
  - [ ] restore-error: 特定時点への復元またはスナップショットからの復元を実行しようとした際に、DB インスタンスでエラーが発生しました。
  - [ ] 開始中: DB インスタンスは起動中です。
  - [ ] stopping: DB インスタンスを停止中です
  - [ ] stopped: DB インスタンスは停止済みです
  - [ ] storage-full: インスタンスが、ストレージ容量の割り当て分に到達しました。これは非常に重要なステータスであり、すぐに修正する必要があります。ストレージは、DB インスタンスを変更して拡張する必要があります。このような状況にならないように、ストレージ容量が減少したときに警告を生成する CloudWatch アラームを設定します
  - [ ] storage-optimization: DB インスタンスが変更されて、ストレージのサイズまたはタイプが変更されています。DB インスタンスは完全に稼働していますが、DB インスタンスの状態がストレージ最適化である間は、DB インスタンスのストレージに対する変更をリクエストすることはできません。ストレージ最適化プロセスは通常短時間で終了しますが、場合によっては 24 時間以上かかることもあります
  - [ ] upgrading: データベースエンジンのバージョンをアップグレード中です
- [X] AZサービス
- [X] 利用できるデータベースエンジンの種類
  - [X] MySQL
  - [X] PostgreSQL
  - [X] MariaDB
  - [X] Oracle
  - [X] SQL Server
- [X] Mutli AZ配置
  - [X] Multi AZのにすることの利点について
- [X] プライマリーセカンダリーの扱い
- [X] リードレプリカの同期タイミング
  - [X] 非同期で行われる
- [X] フェイルオーバー
- [ ] backup 
  - [ ] preferred backup window
  - [ ] backup retention period
  - [ ] I/O suspension for single
  - [ ] Point-In-Time Recovery
- [ ] snapshot 
  - [ ] DB Snapshots make entire DB instance
  - [ ] from one region to another region,a copy retain in that region
  - [ ] Because KMS encryption keys are specific to the region that they are created in, encrypted snapshot cannot be copied to another region
  - [ ] DB Snapshot Sharing 
    - [ ] DB snapshot that uses an option group with permanent or persistent options cannot be shared
    - [ ] KMS key policy must first be updated by adding any accounts to share the snapshot with, before sharing an encrypted DB snapshot
- [ ] replication 
  - [ ] routing read queries from applications to the Read Replica
  - [ ] Failover mechanism automatically changes the DNS record of the DB instance to point to the standby DB instance
  - [ ] Multi-AZ deployment 
    - [ ] read-only traffic, use a Read Replica.
    - [ ] synchronous standby replica in a different Availability Zone
    - [ ] must be in same region
    - [ ] Read Replica 
      - [ ] RDS sets up a secure communications channel between the source DB instance and the Read Replica, if that Read Replica is in a different AWS region from the DB instance
      - [ ] replication link is broken, A Read Replica can be promoted to a new independent source DB
      - [ ] use some tools like HAPROXY, with two url ,one for write one tor read
- [ ] security 
  - [ ] Encryption enabled at creating, can not change key later
  - [ ] Once encryption, log,snapshot,autobackup, replica are encripted
  - [ ] Cross region replicas and snapshots copy does not work since the key is only available in a single region
  - [ ] Database security groups default to a “deny all” access mode
- [ ] monitor 
  - [ ] 监控的metric 16 项, ReplicaLag
  - [ ] Backup not notify for snapshot
- [ ] maintenance 
  - [ ] Multi-AZ deployment, preform standby, promote standby, preform old primary
  - [ ] RDS takes two DB snapshots , before upgrade, after upgrade
